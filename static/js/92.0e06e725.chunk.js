(self.webpackChunkLaw_web_app=self.webpackChunkLaw_web_app||[]).push([[92],{9602:function(e,t,n){"use strict";n.d(t,{ZP:function(){return o},d1:function(){return l},qN:function(){return c}});var r=n(74165),a=n(15861),s=n(64802),i=n(31505);function c(e,t){return u.apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,a.Z)((0,r.Z)().mark((function e(){var a,i,c,u;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=7;break}return(a=new XMLHttpRequest).responseType="blob",a.onload=function(e){var t=a.response;(0,s.saveAs)(t,n)},a.open("GET",t),a.send(),e.abrupt("return");case 7:i=0;case 8:if(!(i<t.length)){e.next=19;break}return e.next=11,fetch(t[i]);case 11:return c=e.sent,e.next=14,c.blob();case 14:u=e.sent,(0,s.saveAs)(u);case 16:i++,e.next=8;break;case 19:case"end":return e.stop()}}),e)})))();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function o(e){for(var t in e)(""===e[t]||"Open this select menu"===e[t])&&delete e[t];return e}function l(e){if(!e)return"";var t=e;e instanceof i.EK&&(t=(0,i._d)(e));var n=new Date(t).toLocaleDateString("ko-KR",{timeZone:"Asia/Colombo"}).split("."),r=n[0].trim(),a=n[1].trim(),s=n[2].trim();return 2===r.length&&(r="00"+r),3===r.length&&(r="0"+r),1===a.length&&(a="0"+a),1===s.length&&(s="0"+s),"".concat(r,"-").concat(a,"-").concat(s)}},25998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(74165),a=n(15861),s=n(29439),i=n(72791),c=n(16030),u=n(79271),o=(n(4819),n(9858)),l=n(30577),f=n(33168),p=n(96905),d=n(24846),m=n(78983),x=n(17540),h=(n(83270),n(9602)),v=n(31505),b=n(88498),w=n(49585),g=(n(49348),n(80184));function k(e){var t=(0,u.k6)(),n=((0,c.I0)(),(0,f.$)().t),k=(window.innerHeight,e.location.state.question),y=(0,i.useRef)(null),Z=(0,c.v9)(b.wl.user.selectUserID),j=(0,i.useState)([]),N=(0,s.Z)(j,2),D=N[0],A=N[1],C=(0,i.useState)(""),I=(0,s.Z)(C,2),q=I[0],_=I[1],M=(0,i.useState)(!1),O=(0,s.Z)(M,2),S=(O[0],O[1]),E=(0,i.useState)(null),H=(0,s.Z)(E,2),T=H[0];H[1];(0,i.useEffect)((function(){var e=(0,v.IO)((0,v.hJ)(v.RZ,"Question",k.questionID,"chat"));return(0,v.cf)(e,(function(e){var t=[];e.forEach((function(e){var n=e.data(),r=n.author.id==k.clientID?"left":"right",a="text";switch(n.type){case"image":a="photo";break;case"file":a="file";break;default:a="text"}var s="py-2 text-black text-lg";"left"==r?"image"==n.type?s+=" mr-[60%]":s+=" mr-16":"image"==n.type?s+=" ml-[60%]":s+=" ml-16";var i={position:r,type:a,id:n.id,date:new Date(n.createdAt),className:s,text:n.text?n.text:n.name,title:"left"==r?"Client":"Admin",data:{uri:n.uri,className:"w-40",status:{click:!1,loading:0}}};t.push(i)})),A(t)}))}),[]);var L=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a,s,i,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.next=3;break}return e.abrupt("return");case 3:if(s=(new Date).valueOf(),20971520,!(a.size>20971520)){e.next=8;break}return l.Am.error("Max file size is 20MB"),e.abrupt("return");case 8:return i="image",i=a.type.startsWith("image")?"image":"file",c={author:{id:Z},createdAt:s,id:s,type:i,name:a.name},e.prev=11,e.next=14,w.MH.addChatFileToQuestion(k.questionID,a,c);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(11),console.log(e.t0),l.Am.error("Error uploading file");case 20:case"end":return e.stop()}}),e,null,[[11,16]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!=q&&q){e.next=3;break}return e.abrupt("return");case 3:return n=(new Date).valueOf(),a={author:{id:Z},createdAt:n,id:n,type:"text",text:q},e.prev=5,e.next=8,w.MH.addChatToQuestion(k.questionID,a);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Answered"!=k.status){e.next=2;break}return e.abrupt("return");case 2:return S(!0),e.prev=3,e.next=6,w.MH.updateQuestion(k.questionID,{status:"Answered"});case 6:return t=(new Date).valueOf(),a={author:{id:Z},createdAt:t,id:t,type:"text",text:"Answered the question."},e.next=10,w.MH.addChatToQuestion(k.questionID,a);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),S(!1),l.Am.error(n("common_error"));case 16:S(!1);case 17:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.qN)(t,n);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"col-span-1 bg-red py-2 flex justify-center align-middle",children:(0,g.jsxs)(m.u5,{className:" text-md",color:"primary",variant:"outline",onClick:function(){return t.push({pathname:"/law-admin/question/pool",state:{client:{clientID:k.clientID,clientName:k.clientName}}})},children:[(0,g.jsx)(d.Z,{icon:x.j})," ",(0,g.jsx)("span",{className:"text-sm",children:n("show_previous_questions")})]})}),(0,g.jsxs)("div",{className:"mb-4 columns-1 flex flex-col justify-between \n      h-screen bg-transparent overflow-y-scroll w-full",children:[(0,g.jsx)(p.rN,{className:"message-list m-1",lockable:!0,toBottomHeight:"100%",dataSource:D,onDownload:function(e){return B(e.data.uri,e.text)}}),(0,g.jsxs)("div",{className:"mb-0 mx-1 sticky bottom-0 grid grid-cols-8 align-middle justify-center",children:[(0,g.jsx)("div",{className:"col-span-7",children:(0,g.jsx)(p.II,{className:"m-1 p-1",value:T,onChange:function(e){_(e.target.value)},placeholder:"Type here...",multiline:!0,rightButtons:(0,g.jsx)(p.zx,{color:"white",backgroundColor:"black",text:"Send",onClick:Q}),leftButtons:(0,g.jsxs)("button",{id:"recaptcha-container",disabled:!1,onClick:function(){y.current.click()},type:"submit",className:"group relative w-full flex justify-center py-1 px-4\n                    border-transparent text-sm font-medium text-black \n                    ",children:[(0,g.jsx)("input",{style:{display:"none"},ref:y,type:"file",onChange:L}),(0,g.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,g.jsx)(o.Z,{className:"h-5 w-5","aria-hidden":"true"})})]})})}),(0,g.jsx)("div",{className:"col-span-1 bg-red py-2 flex justify-center align-middle",children:(0,g.jsx)(p.zx,{color:"white",backgroundColor:"green",text:"Submit Answer",onClick:z})})]})]})]})}},13411:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=13411,e.exports=t},62183:function(){},13024:function(){},62715:function(){},13611:function(){},28353:function(){},1210:function(){},43454:function(){}}]);
//# sourceMappingURL=92.0e06e725.chunk.js.map